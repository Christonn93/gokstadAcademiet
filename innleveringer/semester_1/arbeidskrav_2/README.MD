# Library Database System - README

## ğŸ¢ Project Overview
The **ga_bibliotek** database system is designed to support a small library's operations, allowing users to borrow books while maintaining comprehensive records of books, copies, borrowers, and loan transactions.

---

## ğŸ“‹ Table of Contents
- [Database Design](#database-design)
- [Installation](#installation)
- [Folder Structure](#folder-structure)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)
- [Contact](#contact)
- [Acknowledgments](#acknowledgments)
- [Resources](#resources)
- [AI Documentation](#ai-documentation)

---

### ğŸ“Š Database Structure

[Read about the database structure here](./.docs/other/Notes.md)

---

## ğŸ› ï¸ Installation

### Prerequisites
- Docker and Docker Compose
- Python 3.12+
- MySQL Connector for Python

### Setup Steps
1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd innleveringer/semester_1/arbeidskrav_2
   ```

2. **Install Python dependencies**
   ```bash
   pip install -r requirements.txt
   ```

3. **Configure Environment Variables**
   - Copy `.env.example` to `.env`
   - Update the values in `.env` as needed

4. **Start Database Services**
   ```bash
   docker compose -f ./docker/compose.yml up -d
   ```

---

## ğŸƒ Run the project

1. Start docker container
    ```bash
        docker compose -f ./docker/compose.yml up -d
    ```
> You can now navigate to [phpMyadmin](http://localhost:8080/index.php) in the browser, input the password and username to view a local version of your database

2. Run Python scripts
    ```bash
        python ./python/main.py
    ```
---

## ğŸ“‚ Folder Structure
```
arbeidskrav_2/
â”œâ”€â”€ .docs/
â”‚   â”œâ”€â”€ AI-Help/                    â† Documentation of AI-assisted suggestions, notes, or experiments
â”‚   â”œâ”€â”€ images/                     â† Screenshots, diagrams, or visuals used in the documentation or README
â”‚   â””â”€â”€ other/                      â† Any additional reference materials or supporting documents
â”‚
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile                  â† Defines container environment for running the Python app
â”‚   â””â”€â”€ compose.yml                 â† Docker Compose setup for orchestrating services (e.g., app + database)
â”‚
â”œâ”€â”€ init.d/
â”‚   â””â”€â”€ 10-init.sql                 â† Initial SQL setup script for seeding or bootstrapping the database
â”‚
â”œâ”€â”€ sql/
â”‚   â”œâ”€â”€ create_database.sql         â† Defines schema, tables, and constraints for the main database
â”‚   â””â”€â”€ queries.sql                 â† Reusable SQL queries for debugging or manual database operations
â”‚
â”œâ”€â”€ python/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ menu.py                 â† Command-line interface or text-based menu system for user navigation
â”‚   â”‚   â””â”€â”€ controller.py           â† Connects menu actions to the correct service logic (acts as router)
â”‚   â”‚
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ db_config.py            â† Configuration for database connections
â”‚   â”‚   â”œâ”€â”€ db_connection.py        â† Handles database connections (create_connection, close_connection)
â”‚   â”‚   â””â”€â”€ schema.py               â† Python-side representation of database structure and models
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ book_service.py         â† Business logic for managing books (CRUD, availability checks)
â”‚   â”‚   â””â”€â”€ loan_service.py         â† Business logic for managing loans, due dates, and returns
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”‚   â”œâ”€â”€ db_handler.py       â† Wraps DB operations with retry logic and transaction management
â”‚   â”‚   â”‚   â”œâ”€â”€ input_handler.py    â† Validates and sanitizes user input before passing to services
â”‚   â”‚   â”‚   â””â”€â”€ error_handler.py    â† Centralized logic for catching and formatting application errors
    â”‚   â”‚
â”‚   â”‚   â””â”€â”€ helpers/
â”‚   â”‚       â”œâ”€â”€ formatters.py       â† Handles output formatting (e.g., table prints, reports, messages)
â”‚   â”‚       â”œâ”€â”€ validators.py       â† Input validation utilities for type checking and business rules
â”‚   â”‚       â””â”€â”€ converters.py       â† Data conversion helpers (stringâ†”bool, intâ†”str, date parsing, etc.)
â”‚   â”‚
â”‚   â””â”€â”€ main.py                     â† Main entry point; initializes app, loads config, runs main loop
â”‚
â”œâ”€â”€ .env                            â† Environment variables for local development (e.g., DB_URL)
â”œâ”€â”€ .env.example                    â† Example template showing required .env keys and formats
â”œâ”€â”€ requirements.txt                â† Python dependencies required to run the application
â””â”€â”€ README.MD                       â† Project overview, setup guide, and usage instructions

```
---

## ğŸ’½ Program logics

```
[ main.py ] â”€â”€â”€â”€â”€â”€â”€â”€ user interface
     â”‚
     â–¼
[ book_functions.py / loan_functions.py ] â”€â”€â”€ business rules
     â”‚
     â–¼
[ utils.handlers ] â”€â”€â”€ workflow management (errors, input)
     â”‚
     â–¼
[ utils.helpers ] â”€â”€â”€ stateless utilities (validation, formatting)
     â”‚
     â–¼
[ lib.db ] â”€â”€â”€ infrastructure (connection, queries)
```

---

## ğŸ§© Functional Mapping

| Assignment Task              | Implemented in                 | Core Function(s)                            |
|------------------------------|--------------------------------|---------------------------------------------|
| Connect to database          | `db/db_connection.py`          | `create_connection()`, `close_connection()` |
| Fetch all books              | `services/book_service.py`     | `get_all_books()`                           |
| Search books by title/author | `services/book_service.py`     | `search_books(keyword)`                     |
| Register new loan            | `services/loan_service.py`     | `register_loan(lnr, isbn, eksnr, date)`     |
| Return book                  | `services/loan_service.py`     | `return_book(utlansnr)`                     |
| Show borrower history        | `services/loan_service.py`     | `get_borrower_history(lnr)`                 |


---

## ğŸ› Problems

During this assignment and how I have structured my GitHub repo to collect and contain all school related work in one repository I have been struggling with paths
All problems I have had during this Assignment is listed [here](./.docs/other/Problemer.md)

---

## ğŸ’» Usage

### Running SQL Scripts
- Database schema creation: `sql/create_database.sql`
- Sample queries: `sql/queries.sql`

### Python Integration
The Python modules in the `python/` directory provide functions to:
- Connect to the database (`db_connection.py`)
- Manage book data (`book_functions.py`)
- Handle loan operations (`loan_functions.py`)

---

## ğŸ™ Acknowledgments
- Gokstad Akademiet for providing the assignment requirements
- MySQL and Python communities for excellent documentation
- Contributors and reviewers of this project
- Some AI help have been used, documentations for this can be found [here](./.docs/AI-Help)

---

## ğŸ“š Resources
- [MySQL Documentation](https://dev.mysql.com/doc/)
- [Python MySQL Connector Documentation](https://dev.mysql.com/doc/connector-python/en/)
- [Database Design Best Practices](https://www.guru99.com/database-design.html)

---

## ğŸ¤– AI Documentation
This project utilized AI assistance for:
- Code structure optimization
- Documentation template creation
- SQL query validation
- Python function development

**AI Tools Used:**
- ChatGPT
- DeepSeek

**AI Contribution Areas:**
- Database schema design review
- SQL query optimization suggestions
- Python code structure recommendations
- Documentation template generation

---

## ğŸ“„ License
This project is licensed under the MIT License.  
See the LICENSE file for details.

---

## ğŸ“ Contact
**Christopher TÃ¸nnesland**   
ğŸŒ Website: [ChrisDev](https://www.chrisDev.no)

---

*Last updated: 2025-10-27*
```
